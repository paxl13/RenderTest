# Contact Entry App

A simple Flask web application for collecting contact information through a web form.

## Features

- Contact information entry form (name, email, phone, company, notes)
- Clean, responsive web interface
- Form validation and success feedback
- JSON API endpoint for sample user data

## Prerequisites

- Python 3.12+
- uv (Python package manager)
- Supabase account and project

## Local Development

1. Clone the repository:
```bash
git clone <repository-url>
cd RenderTest
```

2. Set up Supabase database:
   - Create a new Supabase project
   - Run this SQL in your Supabase SQL editor:
   ```sql
   create table public.mytable (
     id bigint generated by default as identity not null,
     created_at timestamp with time zone not null default now(),
     name character varying null,
     email character varying null,
     phone character varying null,
     compagny character varying null,
     category character varying null,
     notes character varying null,
     constraint mytable_pkey primary key (id)
   );
   ```

3. Configure environment variables:
```bash
cp .env.sample .env
# Edit .env with your actual Supabase credentials
```

4. Install dependencies:
```bash
uv sync
```

5. Run the application:

**Full-stack development (React + Flask):**
```bash
# Terminal 1: Vite dev server
cd frontend && pnpm install && pnpm run dev  # http://localhost:5173

# Terminal 2: Flask API server  
uv run python watch.py  # http://localhost:5000
```

**Flask-only development:**
```bash
uv run python watch.py  # Serves React build + API
```

**Production mode:**
```bash
python build.py  # Build React frontend
uv run python main.py  # Single server on port 5000
```

## Production Deployment

### Using Gunicorn (Recommended)

```bash
uv run gunicorn --bind 0.0.0.0:8000 main:app
```

### For Render.com Deployment

- Build Command: `pip install uv && uv sync && cd frontend && npm install -g pnpm && pnpm install && pnpm run build`
- Start Command: `uv run gunicorn --bind 0.0.0.0:$PORT main:app`
- Environment Variables:
  - `SUPABASE_URL`: Your Supabase project URL
  - `SUPABASE_KEY`: Your Supabase anon public key
  - `SECRET_KEY`: Flask secret key for sessions

## API Endpoints

- `GET /` - React frontend (contact form)
- `POST /api/contacts` - Create new contact (JSON)
- `GET /api/contacts` - Get all contacts (JSON)  
- `GET /api/health` - Health check endpoint

## Project Structure

```
├── main.py              # Flask application with Supabase integration
├── watch.py            # Development file watcher with auto-reload
├── build.py            # Frontend build script
├── frontend/           # React frontend with Vite
│   ├── src/
│   │   ├── App.jsx     # Main React component
│   │   ├── ContactForm.jsx  # Contact form component
│   │   └── index.jsx   # React entry point
│   ├── package.json    # Frontend dependencies
│   └── vite.config.js  # Vite configuration
├── .env.sample         # Environment variables template
├── pyproject.toml      # Project configuration
├── uv.lock            # Dependency lock file
└── README.md          # This file
```

## Development Notes

Form submissions are saved to the Supabase `mytable` table. The app includes error handling for database operations and displays success/error messages to users.

**File Watcher**: Use `uv run python watch.py` during development for automatic server restarts when Python, HTML, CSS, or JS files change.